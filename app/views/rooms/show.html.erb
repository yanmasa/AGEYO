<h1><%= @post.title %>のチャットルーム</h1>
<% if recipient_signed_in? %>
  <h4><%= @contributor.nickname %>とのチャット</h4>
  <div>
    <% @messages.each do |message| %>
      <% if message.is_recipient %>
        <div class="right-message">
          <%= message.content %>
        </div>
      <% else %>
        <div class="left-message">
          <%= message.content %>
        </div>
      <% end %>
    <% end %>
  </div>

<% elsif contributor_signed_in? %>
  <h4><%= @recipient.name %>とのチャット</h4>
  <div>
    <% @messages.each do |message| %>
      <% if !(message.is_recipient) %>
        <div class="right-message">
          <%= message.content %>
        </div>
      <% else %>
        <div class="left-message">
          <%= message.content %>
        </div>
      <% end %>
    <% end %>
  </div>
<% end %>

<%= form_with model: @message, url: room_messages_path(@room), method: :post, local: true do |f| %>
  <%= f.text_field :content %>
  <%= f.submit 'メッセージを送る' %>
<% end %>